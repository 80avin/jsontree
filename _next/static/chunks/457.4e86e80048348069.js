"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{457:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(5640),a=n(6073),r=n.n(a),i=n(148),l=n(9588),d=n(6996),o=n(5913);let c=()=>{let e=(0,o.useTree)(e=>e.collapsedNodes),t=(0,o.useTree)(e=>e.collapsedEdges),n=(0,i.useMemo)(()=>e.map(e=>'[id$="node-'.concat(e,'"]')),[e]),s=(0,i.useMemo)(()=>t.map(e=>'[class$="edge-'.concat(e,'"]')),[t]),a=(0,i.useCallback)(()=>{document.body.querySelectorAll(".hide_node").forEach(e=>e.classList.remove("hide_node")),n.length&&document.body.querySelectorAll(n.join(",")).forEach(e=>e.classList.add("hide_node")),s.length&&document.body.querySelectorAll(s.join(",")).forEach(e=>e.classList.add("hide_node"))},[n,s]);return(0,i.useEffect)(()=>{a()},[a]),{validateHiddenNodes:a}};var h=n(1903),u=n(6650),x=n(2178);function m(e){return(0,s.jsx)("foreignObject",{style:{width:e.width,height:e.height},className:(0,u.x)(x.firaMono.className,e.isObject?"":"text-center","pointer-events-none overflow-hidden font-medium"),children:e.children})}function p(e){return(0,s.jsx)("span",{style:e.style,className:e.classNames,children:e.innerText})}var g=n(1508),f=n(2123);let b=(0,i.memo)(e=>{let{node:t,x:n,y:a,hasCollapse:r=!1}=e,{id:i,text:l,width:d,height:c,data:{isParent:x,childrenCount:b,type:y}}=t,j=(0,h.n)(e=>e.hideCollapse),w=(0,h.n)(e=>e.childrenCount),N=(0,o.useTree)(e=>e.expandNodes),k=(0,o.useTree)(e=>e.collapseNodes),v=(0,o.useTree)(e=>e.collapsedParents.includes(i)),S=(0,h.n)(e=>e.imagePreview)&&(0,f.R)(l);return(0,s.jsx)(m,{width:d,height:c,isObject:!1,children:S?(0,s.jsx)("div",{className:"p-[5px]",children:(0,s.jsx)("picture",{children:(0,s.jsx)("img",{height:70,width:70,src:l,alt:"node img",className:"object-contain"})})}):(0,s.jsxs)("span",{"data-x":n,"data-y":a,"data-key":JSON.stringify(l),className:"flex h-full items-center justify-between px-1",children:[(0,s.jsx)("span",{className:(0,u.x)("flex h-full w-full items-center justify-center",function(e){let{parent:t,type:n,objectKey:s}=e;return t?"array"===n?"text-[orangered] dark:text-[orange]":"text-[blue] dark:text-[deepskyblue]":s?"text-[crimson]":"text-black dark:text-gray-300"}({parent:x,type:y})),children:(0,s.jsx)(p,{classNames:(0,u.x)(x?"text-xs":"text-[10px]"),innerText:JSON.stringify(l).replaceAll('"',"")})}),(0,s.jsxs)("span",{className:"flex h-full items-center gap-1 dark:text-gray-300",children:[x&&b>0&&w&&(0,s.jsx)("span",{className:"px-1 text-xs",children:"array"===y?"[".concat(b,"]"):"{".concat(b,"}")}),x&&r&&j&&(0,s.jsx)("button",{className:"group pointer-events-auto h-7 w-7 rounded-md bg-gray-200 p-1 hover:bg-gray-300 dark:bg-vsdark-500 dark:ring-1 dark:ring-gray-200/10",onClick:e=>{e.stopPropagation(),v?N(i):k(i)},children:v?(0,s.jsx)(g.h4,{}):(0,s.jsx)(g.qY,{})})]})]})})},function(e,t){return e.node.text===t.node.text&&e.node.width===t.node.width}),y=(0,i.memo)(e=>{let{node:t,x:n,y:a}=e,{text:r,width:i,height:l,data:d}=t;return d.isEmpty?null:(0,s.jsx)(m,{isObject:!0,width:i,height:l,children:(0,s.jsx)("span",{className:"flex h-full items-center",children:(0,s.jsx)("span",{className:"flex flex-col",style:{fontSize:"12px"},children:r.map((e,t)=>(0,s.jsxs)("span",{"data-key":JSON.stringify(e),"data-type":JSON.stringify(e[1]),"data-x":n,"data-y":a+17.8*t,className:"block overflow-hidden text-ellipsis whitespace-nowrap px-3 text-xs",children:[(0,s.jsxs)("span",{className:"inline overflow-hidden text-ellipsis whitespace-nowrap text-[crimson] dark:text-[#5eb9eb]",children:[JSON.stringify(e[0]).replaceAll('"',""),":"," "]}),(0,s.jsx)(p,{classNames:(0,u.x)(function(e){return Number.isNaN(+e)?"true"===e?"text-[blue] dark:text-[lightgreen]":"false"===e?"text-[red]":"null"===e?"text-black dark:text-gray-400":"text-[darkblue] dark:text-[darksalmon]":"text-[green] dark:text-[limegreen]"}(JSON.stringify(e[1]))),innerText:JSON.stringify(e[1])})]},t))})})})},function(e,t){return String(e.node.text)===String(t.node.text)&&e.node.width===t.node.width}),j={rx:50,ry:50},w=e=>{let{text:t,data:n}=e.properties;return(0,s.jsx)(l.Node,{...e,rx:5,ry:5,...n.isEmpty&&j,label:(0,s.jsx)(i.Fragment,{}),className:"".concat(e.isLightMode?"fill-[#f6f8fa]!":"fill-[#2B2C3E]!"),children:e=>{let{node:a,x:r,y:i}=e;return Array.isArray(t)?(0,s.jsx)(y,{node:a,x:r,y:i}):(0,s.jsx)(b,{node:a,hasCollapse:!!n.childrenCount,x:r,y:i})}})},N=r()(()=>Promise.resolve().then(n.bind(n,9588)).then(e=>e.Canvas),{loadableGenerated:{webpack:()=>[null]}});function k(){let e=(0,o.useTree)(e=>e.loading),{validateHiddenNodes:t}=c(),n=(0,o.useTree)(e=>e.setLoading),a=(0,o.useTree)(e=>e.setZoomPanPinch),r=(0,o.useTree)(e=>e.centerView),u=(0,h.n)(e=>e.lightmode),x=(0,o.useTree)(e=>e.direction),m=(0,o.useTree)(e=>e.nodes),p=(0,o.useTree)(e=>e.edges),[g,f]=(0,i.useState)(2e3),[b,y]=(0,i.useState)(2e3),[j,k]=function(){let[e,t]=(0,i.useState)({width:0,height:0}),n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=n.current;if(!e)return;let s=new ResizeObserver(e=>{for(let n of e){let{width:e,height:s}=n.contentRect;t({width:Math.round(e),height:Math.round(s)})}});return s.observe(e),()=>{s.unobserve(e)}},[]),[n,e]}(),v=(0,i.useCallback)(e=>{a(e)},[a]),S=(0,i.useCallback)(e=>{if(e.width&&e.height){let s=Math.abs(100*(e.width*e.height)/(g*b)-100);f(e.width+50),y(e.height+50),setTimeout(()=>{n(!1),t(),window.requestAnimationFrame(()=>{s>70&&r()})})}},[r,b,g,n,t]),C=(0,i.useCallback)(e=>(0,s.jsx)(w,{...e,animated:!1,isLightMode:u}),[u]),T=(0,i.useCallback)(e=>(0,s.jsx)(l.Edge,{...e,containerClassName:"edge-".concat(e.id)}),[]);return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)("div",{className:"dark:bg-vsdark-500 pointer-events-none absolute inset-0 top-0 left-0 z-50 flex items-center justify-center bg-white dark:text-white",children:(0,s.jsx)("div",{className:"text-base",children:(0,s.jsx)("span",{children:"Building graph..."})})}),(0,s.jsxs)("div",{ref:j,onContextMenu:e=>e.preventDefault(),className:"dark:bg-vsdark-500 absolute h-[calc(100vh-84px)] w-full active:cursor-move!",children:[(0,s.jsx)("div",{className:"absolute top-1 right-1 z-20 rounded-md p-1 text-xs dark:text-gray-300",children:(0,s.jsxs)("span",{children:[k.width," X ",k.height]})}),(0,s.jsx)(d.GT,{maxScale:2,minScale:.05,initialScale:.4,wheel:{step:.04},zoomAnimation:{animationType:"linear"},doubleClick:{disabled:!0},onInit:v,onPanning:e=>{var t;return null===(t=e.instance.wrapperComponent)||void 0===t?void 0:t.classList.add("pointer-events-none")},onPanningStop:e=>{var t;return null===(t=e.instance.wrapperComponent)||void 0===t?void 0:t.classList.remove("pointer-events-none")},children:(0,s.jsx)(d.WZ,{wrapperStyle:{width:"100%",height:"100%",overflow:"hidden",display:e?"none":"block"},children:(0,s.jsx)(N,{className:"jsontree-canvas",nodes:m,edges:p,maxHeight:b,maxWidth:g,height:b,width:g,direction:x,onLayoutChange:S,node:C,edge:T,pannable:!1,zoomable:!1,animated:!1,readonly:!0,dragEdge:null,dragNode:null,fit:!0},x)})})]})]})}}}]);