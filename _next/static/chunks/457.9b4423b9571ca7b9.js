"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{457:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(5640),s=n(6073),r=n.n(s),i=n(148),l=n(9588),d=n(6996),o=n(5913);let c=()=>{let e=(0,o.W)(e=>e.collapsedNodes),t=(0,o.W)(e=>e.collapsedEdges),n=(0,i.useMemo)(()=>e.map(e=>'[id$="node-'.concat(e,'"]')),[e]),a=(0,i.useMemo)(()=>t.map(e=>'[class$="edge-'.concat(e,'"]')),[t]),s=(0,i.useCallback)(()=>{document.body.querySelectorAll(".hide_node").forEach(e=>e.classList.remove("hide_node")),n.length&&document.body.querySelectorAll(n.join(",")).forEach(e=>e.classList.add("hide_node")),a.length&&document.body.querySelectorAll(a.join(",")).forEach(e=>e.classList.add("hide_node"))},[n,a]);return(0,i.useEffect)(()=>{s()},[s]),{validateHiddenNodes:s}};var h=n(1903),x=n(6650),u=n(4939);function m(e){return(0,a.jsx)("foreignObject",{style:{width:e.width,height:e.height},className:(0,x.x)(u.firaMono.className,e.isObject?"":"text-center","pointer-events-none overflow-hidden font-medium"),children:e.children})}function p(e){return(0,a.jsx)("span",{style:e.style,className:e.classNames,children:e.innerText})}var g=n(1508),f=n(2123);let b=(0,i.memo)(e=>{let{node:t,x:n,y:s,hasCollapse:r=!1}=e,{id:i,text:l,width:d,height:c,data:{isParent:u,childrenCount:b,type:y}}=t,j=(0,h.n)(e=>e.hideCollapse),w=(0,h.n)(e=>e.childrenCount),N=(0,o.W)(e=>e.expandNodes),k=(0,o.W)(e=>e.collapseNodes),v=(0,o.W)(e=>e.collapsedParents.includes(i)),S=(0,h.n)(e=>e.imagePreview)&&(0,f.R)(l);return(0,a.jsx)(m,{width:d,height:c,isObject:!1,children:S?(0,a.jsx)("div",{className:"p-[5px]",children:(0,a.jsx)("picture",{children:(0,a.jsx)("img",{height:70,width:70,src:l,alt:"node img",className:"object-contain"})})}):(0,a.jsxs)("span",{"data-x":n,"data-y":s,"data-key":JSON.stringify(l),className:"flex h-full items-center justify-between px-1",children:[(0,a.jsx)("span",{className:(0,x.x)("flex h-full w-full items-center justify-center",function(e){let{parent:t,type:n,objectKey:a}=e;return t?"array"===n?"text-[orangered] dark:text-[orange]":"text-[blue] dark:text-[deepskyblue]":a?"text-[crimson]":"text-black dark:text-gray-300"}({parent:u,type:y})),children:(0,a.jsx)(p,{classNames:(0,x.x)(u?"text-xs":"text-[10px]"),innerText:JSON.stringify(l).replaceAll('"',"")})}),(0,a.jsxs)("span",{className:"flex h-full items-center gap-1 dark:text-gray-300",children:[u&&b>0&&w&&(0,a.jsx)("span",{className:"px-1 text-xs",children:"array"===y?"[".concat(b,"]"):"{".concat(b,"}")}),u&&r&&j&&(0,a.jsx)("button",{className:"group pointer-events-auto h-7 w-7 rounded-md bg-gray-200 p-1 hover:bg-gray-300 dark:bg-vsdark-500 dark:ring-1 dark:ring-gray-200/10",onClick:e=>{e.stopPropagation(),v?N(i):k(i)},children:v?(0,a.jsx)(g.h4,{}):(0,a.jsx)(g.qY,{})})]})]})})},function(e,t){return e.node.text===t.node.text&&e.node.width===t.node.width}),y=(0,i.memo)(e=>{let{node:t,x:n,y:s}=e,{text:r,width:i,height:l,data:d}=t;return d.isEmpty?null:(0,a.jsx)(m,{isObject:!0,width:i,height:l,children:(0,a.jsx)("span",{className:"flex h-full items-center",children:(0,a.jsx)("span",{className:"flex flex-col",style:{fontSize:"12px"},children:r.map((e,t)=>(0,a.jsxs)("span",{"data-key":JSON.stringify(e),"data-type":JSON.stringify(e[1]),"data-x":n,"data-y":s+17.8*t,className:"block overflow-hidden text-ellipsis whitespace-nowrap px-3 text-xs",children:[(0,a.jsxs)("span",{className:"inline overflow-hidden text-ellipsis whitespace-nowrap text-[crimson] dark:text-[#5eb9eb]",children:[JSON.stringify(e[0]).replaceAll('"',""),":"," "]}),(0,a.jsx)(p,{classNames:(0,x.x)(function(e){return Number.isNaN(+e)?"true"===e?"text-[blue] dark:text-[lightgreen]":"false"===e?"text-[red]":"null"===e?"text-black dark:text-gray-400":"text-[darkblue] dark:text-[darksalmon]":"text-[green] dark:text-[limegreen]"}(JSON.stringify(e[1]))),innerText:JSON.stringify(e[1])})]},t))})})})},function(e,t){return String(e.node.text)===String(t.node.text)&&e.node.width===t.node.width}),j={rx:50,ry:50},w=e=>{let{text:t,data:n}=e.properties;return(0,a.jsx)(l.Node,{...e,rx:5,ry:5,...n.isEmpty&&j,label:(0,a.jsx)(i.Fragment,{}),className:"".concat(e.isLightMode?"fill-[#f6f8fa]!":"fill-[#2B2C3E]!"),children:e=>{let{node:s,x:r,y:i}=e;return Array.isArray(t)?(0,a.jsx)(y,{node:s,x:r,y:i}):(0,a.jsx)(b,{node:s,hasCollapse:!!n.childrenCount,x:r,y:i})}})},N=r()(()=>Promise.resolve().then(n.bind(n,9588)).then(e=>e.Canvas),{loadableGenerated:{webpack:()=>[null]}});function k(){let e=(0,o.W)(e=>e.loading),{validateHiddenNodes:t}=c(),n=(0,o.W)(e=>e.setLoading),s=(0,o.W)(e=>e.setZoomPanPinch),r=(0,o.W)(e=>e.centerView),x=(0,h.n)(e=>e.lightmode),u=(0,o.W)(e=>e.direction),m=(0,o.W)(e=>e.nodes),p=(0,o.W)(e=>e.edges),[g,f]=(0,i.useState)(2e3),[b,y]=(0,i.useState)(2e3),[j,k]=function(){let[e,t]=(0,i.useState)({width:0,height:0}),n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=n.current;if(!e)return;let a=new ResizeObserver(e=>{for(let n of e){let{width:e,height:a}=n.contentRect;t({width:Math.round(e),height:Math.round(a)})}});return a.observe(e),()=>{a.unobserve(e)}},[]),[n,e]}(),v=(0,i.useCallback)(e=>{s(e)},[s]),S=(0,i.useCallback)(e=>{if(e.width&&e.height){let a=Math.abs(100*(e.width*e.height)/(g*b)-100);f(e.width+50),y(e.height+50),setTimeout(()=>{n(!1),t(),window.requestAnimationFrame(()=>{a>70&&r()})})}},[r,b,g,n,t]),C=(0,i.useCallback)(e=>(0,a.jsx)(w,{...e,animated:!1,isLightMode:x}),[x]),W=(0,i.useCallback)(e=>(0,a.jsx)(l.Edge,{...e,containerClassName:"edge-".concat(e.id)}),[]);return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)("div",{className:"dark:bg-vsdark-500 pointer-events-none absolute inset-0 top-0 left-0 z-50 flex items-center justify-center bg-white dark:text-white",children:(0,a.jsx)("div",{className:"text-base",children:(0,a.jsx)("span",{children:"Building graph..."})})}),(0,a.jsxs)("div",{ref:j,onContextMenu:e=>e.preventDefault(),className:"dark:bg-vsdark-500 absolute h-[calc(100vh-84px)] w-full active:cursor-move!",children:[(0,a.jsx)("div",{className:"absolute top-1 right-1 z-20 rounded-md p-1 text-xs dark:text-gray-300",children:(0,a.jsxs)("span",{children:[k.width," X ",k.height]})}),(0,a.jsx)(d.GT,{maxScale:2,minScale:.05,initialScale:.4,wheel:{step:.04},zoomAnimation:{animationType:"linear"},doubleClick:{disabled:!0},onInit:v,onPanning:e=>{var t;return null===(t=e.instance.wrapperComponent)||void 0===t?void 0:t.classList.add("pointer-events-none")},onPanningStop:e=>{var t;return null===(t=e.instance.wrapperComponent)||void 0===t?void 0:t.classList.remove("pointer-events-none")},children:(0,a.jsx)(d.WZ,{wrapperStyle:{width:"100%",height:"100%",overflow:"hidden",display:e?"none":"block"},children:(0,a.jsx)(N,{className:"jsontree-canvas",nodes:m,edges:p,maxHeight:b,maxWidth:g,height:b,width:g,direction:u,onLayoutChange:S,node:C,edge:W,pannable:!1,zoomable:!1,animated:!1,readonly:!0,dragEdge:null,dragNode:null,fit:!0},u)})})]})]})}}}]);